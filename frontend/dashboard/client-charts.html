<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Portfolio Charts - Portfolio Manager</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="stylesheet" href="../css/client-charts.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
</head>
<body class="client-charts-fullscreen">
    <header class="client-charts-header">
        <a href="client-detail.html" class="back-link" id="backLink">&larr; Back to Clients</a>
        <h1 id="clientChartsTitle">Portfolio Charts</h1>
        <div class="timeline-selector">
            <span class="timeline-label">Timeline:</span>
            <div class="timeline-buttons" id="timelineButtons">
                <button type="button" class="timeline-btn active" data-period="1d">1D</button>
                <button type="button" class="timeline-btn" data-period="5d">1W</button>
                <button type="button" class="timeline-btn" data-period="1mo">1M</button>
                <button type="button" class="timeline-btn" data-period="6mo">6M</button>
                <button type="button" class="timeline-btn" data-period="1y">1Y</button>
                <button type="button" class="timeline-btn" data-period="5y">5Y</button>
            </div>
        </div>
    </header>

    <main class="client-charts-main">
        <!-- Combined Portfolio Value Summary -->
        <section class="charts-section combined-section">
            <h2>Combined Portfolio Value</h2>
            <div class="portfolio-value-summary">
                <div class="value-card">
                    <span class="value-label">Total Value</span>
                    <span id="totalPortfolioValue" class="value-amount">$0.00</span>
                </div>
                <div class="value-card">
                    <span class="value-label">Last Updated</span>
                    <span id="lastUpdateTime" class="value-meta">--</span>
                </div>
            </div>
            <div class="chart-wrapper">
                <canvas id="combinedPortfolioChart"></canvas>
            </div>
            <p id="combinedChartMessage" class="chart-message"></p>
        </section>

        <!-- Individual Assets (click to show chart) -->
        <section class="charts-section assets-section">
            <h2>Assets</h2>
            <p class="section-hint">Click an asset to view its historical chart</p>
            <div class="assets-grid" id="assetsGrid"></div>
        </section>

        <!-- Hidden asset chart (shown when asset clicked) -->
        <section class="charts-section asset-detail-section hidden" id="assetChartSection">
            <div class="asset-detail-header">
                <h2 id="assetChartTitle">Asset Chart</h2>
                <button type="button" class="btn-close-chart" id="closeAssetChart" aria-label="Close">&times;</button>
            </div>
            <div class="chart-wrapper chart-wrapper-large">
                <canvas id="singleAssetChart"></canvas>
            </div>
        </section>
    </main>

    <div id="errorBanner" class="error-banner hidden"></div>

    <script src="../js/api.js"></script>
    <script src="../js/client-charts.js"></script>
</body>
</html>
